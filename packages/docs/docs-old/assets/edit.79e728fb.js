import{d as a,m as e,p as l,r as n,k as t,u,o,w as s,c as i,a as r,S as d,l as p,n as v}from"./index.9b6a8b9b.js";/* empty css              */var c=a({name:"sb-paragraph-edit",model:e,props:{blockId:{type:String,required:!0},data:{type:null,default:l},onUpdate:{type:null,default:()=>{}},onAppendBlock:{type:null,default:()=>{}},onRemoveSelf:{type:null,default:()=>{}},onActivateNext:{type:null,default:()=>{}},onActivatePrevious:{type:null,default:()=>{}}},setup(a){const e=n({value:a.data.value,align:a.data.align,focused:!1}),c=t(null),{isActive:f,activate:g}=u(a.blockId),y=()=>{c.value&&f.value&&c.value.focus()};o((()=>{y(),c.value&&(c.value.innerHTML=e.value)})),s(f,y),s((()=>a.data),(()=>{e.value=a.data.value,e.align=a.data.align,c.value&&(c.value.innerHTML=e.value)}));const b=a=>{e.value=a.target.innerHTML},h=i((()=>({"sb-paragraph":!0,"sb-paragraph_focused":e.focused,[`sb-paragraph_align-${e.align}`]:!0}))),k=l=>{a.onUpdate({value:e.value,align:l.target.value})},m=()=>{e.focused=!0,g()},A=()=>{e.focused=!1,a.onUpdate({value:e.value,align:e.align})},w=e=>{if("Enter"===e.key&&!e.shiftKey){const n=""+ +new Date;a.onAppendBlock({id:n,name:"sb-paragraph",data:l()}),g(n),e.preventDefault()}},x=l=>{var n;"Backspace"===l.key&&""===e.value&&a.onRemoveSelf();const t=window.getSelection(),u=null==t?void 0:t.focusNode,o=Array.from((null==(n=null==c?void 0:c.value)?void 0:n.childNodes)||[]),s=u?o.indexOf(u):-1;if(u===c.value||0===s||s===o.length-1)switch(l.key){case"ArrowDown":a.onActivateNext();break;case"ArrowUp":a.onActivatePrevious()}};return()=>r("div",{class:h.value},[r(d,null,{default:()=>[r(p,{value:e.align,onChange:k},{default:()=>[r("option",null,[v("left")]),r("option",null,[v("center")]),r("option",null,[v("right")])]})]}),r("p",{class:"sb-paragraph__input",ref:c,contenteditable:!0,onInput:b,onFocus:m,onBlur:A,onKeydown:w,onKeyup:x},null)])}});export default c;
//# sourceMappingURL=edit.79e728fb.js.map
